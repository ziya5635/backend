(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(14),u=n.n(r),c=n(2),s=n(3),l=n.n(s),i="api/people",m=function(){return l.a.get(i).then((function(e){return e.data}))},f=function(e){return l.a.post(i,e).then((function(e){return e.data}))},p=function(e){return l.a.delete("".concat(i,"/").concat(e)).then((function(e){return e}))},d=function(e,t){return l.a.put("".concat(i,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){var t=e.id,n=e.people,a=e.setPeople,r=e.name,u=e.setSuccessMessage;return o.a.createElement("button",{onClick:function(e){e.preventDefault(),window.confirm("Delete ".concat(r,"?"))&&p(t).then((function(){!function(e){var t=n.filter((function(t){return t.id!==e}));a((function(){return t}))}(t),u("".concat(r," removed successfuly from server.")),setTimeout((function(){return u(null)}),4e3)})).catch((function(e){return console.log(e.message)}))}},"delete")},w=function(e){var t=e.people,n=e.keyword,a=e.setPeople,r=e.setSuccessMessage;return t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return o.a.createElement("div",{key:e.name},e.name," ",e.number," ",o.a.createElement(h,{people:t,id:e.id,setPeople:a,name:e.name,setSuccessMessage:r}))}))},b=function(e){var t=e.keyword,n=e.setKeyword;return o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}}))},E=n(4),g=function(e){return o.a.createElement("form",null,o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:e.newName,onChange:function(t){var n=t.target.value;e.setNewName(n)}})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:e.newPhone,onChange:function(t){e.setPhone(t.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",onClick:function(t){if(e.people.some((function(t){return t.name===e.newName}))){t.preventDefault();var n=e.people.find((function(t){return t.name===e.newName}));window.confirm(e.newName+" is already added to phonebook, replace the old number with a new one?")&&d(n.id,Object(E.a)(Object(E.a)({},n),{},{number:e.newPhone})).then((function(t){e.setNewName(""),e.setPhone(""),e.setPeople((function(){return e.people.map((function(e){return e.id!==t.id?e:t}))})),e.setSuccessMessage("".concat(n.name," info updated successfully.")),setTimeout((function(){return e.setSuccessMessage(null)}),4e3)})).catch((function(t){e.setErrorMessage(t.response.data),setTimeout((function(){return e.setErrorMessage(null)}),4e3)}))}else t.preventDefault(),Number(e.newPhone)&&f({name:e.newName,number:e.newPhone}).then((function(t){e.setPeople((function(){return e.people.concat(t)})),e.setNewName(""),e.setPhone(""),e.setSuccessMessage("Added ".concat(e.newName," to phonebook.")),setTimeout((function(){return e.setSuccessMessage(null)}),4e3)})).catch((function(t){e.setErrorMessage(t.response.data),setTimeout((function(){return e.setErrorMessage(null)}),4e3)}))}},"add")))},v=function(e){var t=e.message,n=e.status;return null===t?null:o.a.createElement("div",{className:n},t)},N=(n(37),function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],u=Object(a.useState)(""),s=Object(c.a)(u,2),l=s[0],i=s[1],f=Object(a.useState)(""),p=Object(c.a)(f,2),d=p[0],h=p[1],E=Object(a.useState)(""),N=Object(c.a)(E,2),P=N[0],j=N[1],O=Object(a.useState)(null),S=Object(c.a)(O,2),k=S[0],M=S[1],y=Object(a.useState)(null),C=Object(c.a)(y,2),T=C[0],D=C[1];return Object(a.useEffect)((function(){m().then((function(e){return r(e)})).catch((function(e){return console.log(e.message)}))}),[]),o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(v,{message:k,status:"success"}),o.a.createElement(v,{message:T,status:"error"}),o.a.createElement(b,{keyword:P,setKeyword:j}),o.a.createElement("h2",null,"Add a new"),o.a.createElement(g,{newName:l,newPhone:d,people:n,setPeople:r,setNewName:i,setPhone:h,setSuccessMessage:M,setErrorMessage:D}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(w,{people:n,keyword:P,setPeople:r,setSuccessMessage:M}))});u.a.render(o.a.createElement(N,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.5da48399.chunk.js.map